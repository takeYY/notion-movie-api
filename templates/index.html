{% extends "layout.html" %}
{% block content %}
<div class='container pb-4'>
  <h3 class='text-center'>{{basic_data.get('title')}}</h3>

  <div class='container-fluid'>
    {#
    ##### カード #####
    #}
    <div class="card-group">
      <div class='row'>
        {% for movie in movies %}
          <div class='p-2 col-md-4'>
            <div class="card h-100 border-3 {{ 'border-success' if movie.has_watched else 'border-primary' }}">
              <div class='row no-gutters'>
                {#
                ##### 映画ポスター #####
                #}
                <div class='col-md-4'>
                  <img class="bd-placeholder-img img-thumbnail"
                      src={{ movie.cover_url }}>
                </div>
                {#
                ##### 内容 #####
                #}
                <div class='col-md-8'>
                  <div class="card-body">
                    {#
                    ##### 映画タイトル #####
                    #}
                    <h5 class="card-title">{{ movie.title }}</h5>
                    {#
                    ##### 評価 #####
                    #}
                    {% if movie.rating %}
                      <p class='card-text text-warning'>{{ '★'*movie.rating }}</p>
                    {% else %}
                      <p class='card-text'>-</p>
                    {% endif %}
                    {#
                    ##### 鑑賞済みか否か #####
                    #}
                    {% if movie.last_watched_at and movie.has_watched %}
                      <p class="card-text">
                        <small class="text-muted">
                          Last watched at {{ movie.last_watched_at }}
                        </small>
                      </p>
                    {% elif movie.has_watched %}
                      <p class="card-text">
                        <small class="text-muted">Watched</small>
                      </p>
                    {% else %}
                      <p class="card-text">
                        <small class="text-muted">To Watch</small>
                      </p>
                    {% endif %}
                    <a href={{ url_for('index.edit', page_id=movie.id) }} class='card-link'>編集</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
